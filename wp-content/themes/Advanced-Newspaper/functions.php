<?php# This theme supports gettext function theme_init(){load_theme_textdomain('WpAdvNewspaper', get_template_directory() . '/languages');}add_action ('init', 'theme_init');# This theme has support for custom backgroundadd_custom_background(); #this theme support post thumbnailsadd_theme_support('post-thumbnails');#This theme supports custom navigationif ( function_exists('wp_nav_menu') ) { 	register_nav_menus( array(		'masthead' => __( 'Masthead Navigation', 'transcript' ),		'Header_Category_Nav' => __( 'Category bar on header', 'transcript' ),		'Header_Page_Nav' => __( 'Page list on header', 'transcript' ),		'Footer_Page_Nav' => __( 'Page list on footer', 'transcript' ),		'About_Us_Cat_Nav' => __( 'About us pages', 'transcript' ),		'Publications_Cat_Nav' => __( 'Publications pages', 'transcript' ),		'Staff_Cat_Nav' => __( 'Staff pages', 'transcript' ),		'Professional_Learning_Cat_Nav' => __( 'Professional Learning pages', 'transcript' ),		'Education_Events_Cat_Nav' => __( 'Education Events pages', 'transcript' ),) );}# Define Includes Path */$gab_includes = TEMPLATEPATH . '/includes/';# Load theme Javascripts into the wp_headrequire_once ($gab_includes . 'theme-js.php');# Register widget zonesrequire_once ($gab_includes . 'register-widget-zones.php');# Theme Functionsrequire_once ($gab_includes . 'theme-functions.php');# Theme Control Panelrequire_once ($gab_includes . 'theme-control-panel.php');# Load customized comments templaterequire_once ($gab_includes . 'theme-comments.php');# Load theme thumbnailsrequire_once ($gab_includes . 'theme-thumbnails.php');# Load theme variablesrequire_once ($gab_includes . 'theme-variables.php');/** * Tests if any of a post's assigned categories are descendants of target categories * * @param int|array $cats The target categories. Integer ID or array of integer IDs * @param int|object $_post The post. Omit to test the current post in the Loop or main query * @return bool True if at least 1 of the post's categories is a descendant of any of the target categories * @see get_term_by() You can get a category by name or slug, then pass ID to this function * @uses get_term_children() Passes $cats * @uses in_category() Passes $_post (can be empty) * @version 2.7 * @link http://codex.wordpress.org/Function_Reference/in_category#Testing_if_a_post_is_in_a_descendant_category */if ( ! function_exists( 'post_is_in_descendant_category' ) ) {	function post_is_in_descendant_category( $cats, $_post = null ) {		foreach ( (array) $cats as $cat ) {			// get_term_children() accepts integer ID only			$descendants = get_term_children( (int) $cat, 'category' );			if ( $descendants && in_category( $descendants, $_post ) )				return true;		}		return false;	}}function theme_cart_update() {    $cart_count = wpsc_cart_item_count();    $total = wpsc_cart_total_widget();    echo <<<HTMLjQuery("#headercartcount").html("$cart_count");jQuery("#theme-checkout-total").html("$total"); HTML;} add_action('wpsc_alternate_cart_html', 'theme_cart_update');/* Drop this in functions.php or your theme wp-includes jQuery fix */if( !is_admin()){	wp_deregister_script('jquery');	wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"), false, '1.3.2');	wp_enqueue_script('jquery');}//Allow iFramesadd_filter('tiny_mce_before_init', create_function( '$a','$a["extended_valid_elements"] = "iframe[id|class|title|style|align|frameborder|height|longdesc|marginheight|marginwidth|name|scrolling|src|width]"; return $a;') );?>